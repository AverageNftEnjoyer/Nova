.space-bg {
  background:
    radial-gradient(120% 90% at 60% 6%, rgba(40, 52, 82, 0.2) 0%, rgba(7, 10, 21, 0) 55%),
    linear-gradient(165deg, #03050b 0%, #050913 44%, #02030a 100%);
}

.space-bg__base {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(48% 62% at 62% 44%, rgba(69, 77, 125, 0.2) 0%, rgba(0, 0, 0, 0) 70%),
    radial-gradient(34% 40% at 22% 72%, rgba(20, 35, 75, 0.24) 0%, rgba(0, 0, 0, 0) 78%);
}

.space-bg__nebula {
  position: absolute;
  border-radius: 9999px;
  filter: blur(70px);
  opacity: 0.22;
  animation: space-nebula-float 16s ease-in-out infinite;
}

.space-bg__nebula--left {
  width: 440px;
  height: 290px;
  left: -120px;
  top: 14%;
  background: radial-gradient(circle at 30% 50%, rgba(96, 121, 196, 0.45) 0%, rgba(96, 121, 196, 0) 72%);
}

.space-bg__nebula--right {
  width: 410px;
  height: 260px;
  right: -90px;
  top: 25%;
  animation-delay: 1.6s;
  background: radial-gradient(circle at 65% 40%, rgba(124, 80, 160, 0.35) 0%, rgba(124, 80, 160, 0) 74%);
}

.space-bg__nebula--bottom {
  width: 460px;
  height: 240px;
  left: 24%;
  bottom: -110px;
  animation-delay: 2.1s;
  background: radial-gradient(circle at 50% 30%, rgba(42, 97, 176, 0.26) 0%, rgba(42, 97, 176, 0) 74%);
}

.space-bg__stars {
  position: absolute;
  inset: 0;
}

.space-bg__star {
  position: absolute;
  border-radius: 9999px;
  background: rgba(244, 247, 255, 0.84);
  animation-name: space-star-twinkle;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
}

.space-bg__star--accent {
  background: rgba(var(--accent-rgb), 0.76);
  box-shadow: 0 0 8px rgba(var(--accent-rgb), 0.28);
}

.space-bg__planet-field {
  position: absolute;
  inset: 0;
}

.space-bg__planet-shell {
  position: absolute;
  border-radius: 9999px;
  pointer-events: none;
  overflow: hidden;
  background:
    radial-gradient(circle at 34% 28%, rgba(235, 246, 255, 0.22) 0%, rgba(235, 246, 255, 0) 34%),
    radial-gradient(circle at 48% 58%, var(--planet-base, rgba(126, 149, 188, 0.58)) 0%, rgba(8, 16, 34, 0.24) 84%, rgba(8, 16, 34, 0.05) 100%);
  box-shadow: 0 0 18px var(--planet-glow, rgba(170, 194, 236, 0.16));
  animation: space-planet-drift ease-in-out infinite;
}

.space-bg__planet-shell--ocean {
  background:
    radial-gradient(circle at 24% 22%, rgba(215, 246, 255, 0.28) 0%, rgba(215, 246, 255, 0) 34%),
    radial-gradient(circle at 50% 62%, var(--planet-base, rgba(66, 138, 210, 0.74)) 0%, rgba(22, 66, 130, 0.68) 48%, rgba(7, 19, 46, 0.22) 96%);
}

.space-bg__planet-shell--gas {
  background:
    radial-gradient(circle at 30% 24%, rgba(255, 236, 206, 0.24) 0%, rgba(255, 236, 206, 0) 32%),
    radial-gradient(circle at 48% 58%, var(--planet-base, rgba(205, 146, 94, 0.68)) 0%, rgba(84, 48, 36, 0.58) 54%, rgba(15, 12, 18, 0.24) 96%);
}

.space-bg__planet-shell--ice {
  background:
    radial-gradient(circle at 26% 23%, rgba(232, 250, 255, 0.4) 0%, rgba(232, 250, 255, 0) 36%),
    radial-gradient(circle at 52% 60%, var(--planet-base, rgba(138, 192, 225, 0.68)) 0%, rgba(70, 116, 160, 0.58) 56%, rgba(10, 22, 44, 0.18) 96%);
  box-shadow:
    0 0 18px var(--planet-glow, rgba(182, 226, 247, 0.2)),
    0 0 38px rgba(172, 217, 255, 0.08);
}

.space-bg__planet-shell--volcanic {
  background:
    radial-gradient(circle at 30% 22%, rgba(255, 224, 173, 0.2) 0%, rgba(255, 224, 173, 0) 34%),
    radial-gradient(circle at 52% 62%, var(--planet-base, rgba(180, 96, 72, 0.74)) 0%, rgba(86, 34, 29, 0.72) 52%, rgba(20, 10, 16, 0.32) 96%);
  box-shadow:
    0 0 18px var(--planet-glow, rgba(255, 138, 90, 0.18)),
    0 0 42px rgba(232, 84, 52, 0.06);
}

.space-bg__planet-shell--hero {
  box-shadow:
    0 0 24px var(--planet-glow, rgba(98, 166, 255, 0.24)),
    0 0 56px rgba(71, 134, 242, 0.14);
  background:
    radial-gradient(circle at 28% 24%, rgba(225, 244, 255, 0.46) 0%, rgba(225, 244, 255, 0) 36%),
    radial-gradient(circle at 48% 62%, var(--planet-base, rgba(70, 136, 229, 0.78)) 0%, rgba(25, 62, 122, 0.65) 52%, rgba(8, 20, 46, 0.22) 96%);
}

.space-bg__planet-atmo {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at 18% 22%, var(--planet-atmo, rgba(222, 235, 255, 0.24)) 0%, rgba(255, 255, 255, 0) 46%);
}

.space-bg__planet-band {
  position: absolute;
  left: -10%;
  width: 120%;
  border-radius: 9999px;
  filter: blur(0.2px);
}

.space-bg__planet-shell--gas .space-bg__planet-band--a {
  height: 22%;
  background: linear-gradient(90deg, rgba(255, 218, 168, 0.08) 0%, rgba(255, 205, 144, 0.28) 52%, rgba(255, 218, 168, 0.08) 100%);
}

.space-bg__planet-shell--gas .space-bg__planet-band--b {
  height: 20%;
  background: linear-gradient(90deg, rgba(190, 132, 89, 0.08) 0%, rgba(222, 162, 116, 0.24) 52%, rgba(190, 132, 89, 0.08) 100%);
}

.space-bg__planet-band--a {
  top: var(--planet-band-a-top, 32%);
  height: 18%;
  background: linear-gradient(90deg, rgba(123, 156, 226, 0.04) 0%, rgba(137, 174, 241, 0.28) 50%, rgba(123, 156, 226, 0.06) 100%);
}

.space-bg__planet-band--b {
  top: var(--planet-band-b-top, 56%);
  height: 16%;
  background: linear-gradient(90deg, rgba(57, 94, 167, 0.06) 0%, rgba(88, 126, 192, 0.24) 50%, rgba(57, 94, 167, 0.06) 100%);
}

.space-bg__planet-crater {
  position: absolute;
  border-radius: 9999px;
  background: radial-gradient(circle at 32% 35%, rgba(12, 18, 33, 0.65) 0%, rgba(12, 18, 33, 0.26) 56%, rgba(12, 18, 33, 0) 100%);
}

.space-bg__planet-crater--a {
  width: 26%;
  height: 26%;
  left: var(--planet-crater-a-left, 24%);
  top: var(--planet-crater-a-top, 44%);
  transform: scale(var(--planet-crater-scale, 1));
}

.space-bg__planet-crater--b {
  width: 16%;
  height: 16%;
  right: var(--planet-crater-b-right, 22%);
  top: var(--planet-crater-b-top, 28%);
  transform: scale(var(--planet-crater-scale, 1));
}

.space-bg__planet-ring {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--planet-ring-width, 142%);
  height: var(--planet-ring-height, 22%);
  border-radius: 9999px;
  border: 1px solid rgba(160, 208, 240, var(--planet-ring-opacity, 0.3));
  transform: translate(-50%, -50%) rotate(var(--planet-ring-tilt, -19deg));
  box-shadow: 0 0 8px rgba(123, 195, 229, 0.14);
}

.space-bg__planet-ring--inner {
  width: calc(var(--planet-ring-width, 142%) * 0.78);
  height: calc(var(--planet-ring-height, 22%) * 0.72);
  border-color: rgba(210, 234, 255, calc(var(--planet-ring-opacity, 0.3) * 0.85));
  box-shadow: 0 0 6px rgba(178, 223, 255, 0.16);
}

.space-bg__planet-storm {
  position: absolute;
  left: 42%;
  top: 54%;
  width: 28%;
  height: 18%;
  border-radius: 999px;
  background: radial-gradient(circle at 34% 46%, rgba(221, 244, 255, 0.34) 0%, rgba(147, 205, 255, 0.16) 52%, rgba(147, 205, 255, 0) 100%);
  filter: blur(0.3px);
}

.space-bg__planet-polar-cap {
  position: absolute;
  left: 16%;
  top: 8%;
  width: 68%;
  height: 26%;
  border-radius: 999px 999px 52% 52%;
  background: linear-gradient(180deg, rgba(230, 252, 255, 0.54) 0%, rgba(176, 225, 248, 0.34) 58%, rgba(176, 225, 248, 0) 100%);
}

.space-bg__planet-tectonics {
  position: absolute;
  left: 8%;
  top: 44%;
  width: 84%;
  height: 28%;
  border-radius: 999px;
  background:
    repeating-linear-gradient(
      112deg,
      rgba(255, 186, 106, 0.1) 0 5px,
      rgba(255, 112, 64, 0.28) 5px 7px,
      rgba(148, 48, 34, 0.1) 7px 11px
    );
  opacity: 0.72;
  mix-blend-mode: screen;
}

.space-bg__planet-moon {
  position: absolute;
  left: var(--planet-moon-x, 84%);
  top: var(--planet-moon-y, 20%);
  width: var(--planet-moon-size, 10px);
  height: var(--planet-moon-size, 10px);
  border-radius: 9999px;
  opacity: var(--planet-moon-opacity, 0.4);
  background: radial-gradient(circle at 34% 30%, rgba(240, 247, 255, 0.94) 0%, rgba(168, 193, 230, 0.72) 48%, rgba(85, 108, 142, 0.55) 100%);
  box-shadow: 0 0 5px rgba(188, 218, 250, 0.14);
}

.space-bg__shooters {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.space-bg__shooting-star {
  --space-shoot-scale: 1;
  position: absolute;
  width: 180px;
  height: 1.5px;
  border-radius: 9999px;
  opacity: 0;
  transform: scale(var(--space-shoot-scale));
  background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(var(--accent-rgb), 0.38) 58%, rgba(255, 255, 255, 0.7) 100%);
  filter: drop-shadow(0 0 6px rgba(var(--accent-rgb), 0.28));
  animation-name: space-shooting-star;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

.space-bg__meteors {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.space-bg__meteor {
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 58% 42% 49% 51%;
  opacity: 0;
  background:
    radial-gradient(circle at 30% 28%, rgba(255, 246, 196, 0.98) 0%, rgba(255, 184, 84, 0.95) 36%, rgba(226, 84, 34, 0.84) 64%, rgba(101, 36, 24, 0.5) 100%);
  box-shadow: 0 0 14px rgba(255, 140, 66, 0.38);
  animation: space-meteor-event linear infinite;
}

.space-bg__meteor::after {
  content: "";
  position: absolute;
  left: -150px;
  top: 3px;
  width: 160px;
  height: 9px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    rgba(255, 178, 78, 0),
    rgba(255, 122, 44, 0.66) 30%,
    rgba(255, 184, 92, 0.94) 62%,
    rgba(255, 237, 178, 0.98) 100%
  );
  filter: blur(0.6px);
}

.space-bg__meteor::before {
  content: "";
  position: absolute;
  left: -104px;
  top: 6px;
  width: 102px;
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255, 112, 44, 0), rgba(255, 112, 44, 0.72));
  filter: blur(0.4px);
}

.space-bg__pulse-stars {
  position: absolute;
  inset: 0;
}

.space-bg__pulse-star {
  position: absolute;
  width: 2px;
  height: 2px;
  border-radius: 9999px;
  background: rgba(var(--accent-rgb), 0.72);
  box-shadow: 0 0 6px rgba(var(--accent-rgb), 0.38);
  animation: space-pulse-star ease-in-out infinite;
}

.space-bg__vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(80% 62% at 50% 54%, rgba(0, 0, 0, 0) 54%, rgba(0, 0, 0, 0.48) 100%),
    linear-gradient(180deg, rgba(0, 0, 0, 0.14) 0%, rgba(0, 0, 0, 0.34) 100%);
}

.space-bg__asteroids {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.space-bg__asteroid {
  position: absolute;
  border-radius: 38% 62% 55% 45% / 45% 36% 64% 55%;
  background: radial-gradient(circle at 32% 30%, rgba(150, 162, 193, 0.42) 0%, rgba(94, 102, 130, 0.44) 42%, rgba(48, 54, 72, 0.72) 100%);
  box-shadow: 0 0 6px rgba(122, 133, 164, 0.18);
  animation: space-asteroid-drift linear infinite;
}

.space-bg__rockets {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.space-bg__rocket {
  position: absolute;
  left: -10%;
  width: 54px;
  height: 18px;
  border-radius: 999px 999px 8px 8px;
  opacity: 0;
  transform: rotate(9deg);
  background: linear-gradient(90deg, rgba(221, 231, 245, 0.92) 0%, rgba(163, 183, 217, 0.86) 56%, rgba(82, 103, 138, 0.48) 100%);
  border: 1px solid rgba(188, 204, 228, 0.35);
  filter: drop-shadow(0 0 8px rgba(140, 170, 214, 0.22));
  animation: space-rocket-flyby linear infinite;
}

.space-bg__rocket::before {
  content: "";
  position: absolute;
  right: -9px;
  top: 3px;
  width: 0;
  height: 0;
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-left: 10px solid rgba(226, 240, 255, 0.95);
}

.space-bg__rocket-fin {
  position: absolute;
  left: 10px;
  bottom: -5px;
  width: 13px;
  height: 8px;
  border-radius: 0 0 8px 8px;
  background: linear-gradient(180deg, rgba(180, 98, 92, 0.95), rgba(122, 52, 57, 0.84));
}

.space-bg__rocket-window {
  position: absolute;
  left: 23px;
  top: 5px;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: radial-gradient(circle at 34% 34%, rgba(225, 252, 255, 0.98), rgba(137, 213, 247, 0.8));
  box-shadow: 0 0 5px rgba(121, 211, 255, 0.3);
}

.space-bg__rocket-flame {
  position: absolute;
  left: -14px;
  top: 5px;
  width: 14px;
  height: 8px;
  border-radius: 999px 0 0 999px;
  background: linear-gradient(90deg, rgba(255, 122, 72, 0.78), rgba(255, 188, 91, 0.54), rgba(255, 188, 91, 0));
  filter: blur(0.2px);
  animation: space-rocket-flame 0.58s ease-in-out infinite;
}

.space-bg__launches {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.space-bg__rocket--launch {
  position: absolute;
  top: 106%;
  width: 20px;
  height: 58px;
  border-radius: 10px 10px 6px 6px;
  opacity: 0;
  transform: translate3d(0, 0, 0) rotate(0deg);
  background: linear-gradient(180deg, rgba(224, 234, 248, 0.92) 0%, rgba(148, 168, 199, 0.86) 62%, rgba(84, 102, 131, 0.72) 100%);
  border: 1px solid rgba(188, 205, 229, 0.28);
  filter: drop-shadow(0 0 8px rgba(151, 183, 231, 0.2));
  animation: space-rocket-launch linear infinite;
}

.space-bg__rocket--launch::before {
  content: "";
  position: absolute;
  left: 50%;
  top: -12px;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 12px solid rgba(214, 227, 244, 0.94);
}

.space-bg__rocket-spin {
  position: absolute;
  inset: 0;
  animation: space-rocket-subtle-spin ease-in-out infinite;
}

.space-bg__rocket--launch .space-bg__rocket-fin {
  position: absolute;
  left: 3px;
  bottom: -6px;
  width: 14px;
  height: 9px;
  border-radius: 0 0 8px 8px;
  background: linear-gradient(180deg, rgba(154, 95, 100, 0.9), rgba(96, 56, 66, 0.84));
}

.space-bg__rocket--launch .space-bg__rocket-window {
  position: absolute;
  left: 6px;
  top: 18px;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: radial-gradient(circle at 34% 34%, rgba(216, 240, 252, 0.92), rgba(124, 186, 216, 0.64));
  box-shadow: 0 0 4px rgba(121, 211, 255, 0.24);
}

.space-bg__rocket--launch .space-bg__rocket-flame {
  left: 2px;
  top: auto;
  bottom: -16px;
  width: 16px;
  height: 12px;
  border-radius: 0 0 999px 999px;
  background: linear-gradient(180deg, rgba(255, 118, 64, 0.8), rgba(255, 176, 86, 0.56), rgba(255, 176, 86, 0));
  filter: blur(0.35px);
  animation-duration: 0.46s;
}


@keyframes space-star-twinkle {
  0%, 100% { opacity: 0.16; transform: scale(0.8); }
  30% { opacity: 0.94; transform: scale(1.26); }
  62% { opacity: 0.34; transform: scale(0.94); }
}

@keyframes space-shooting-star {
  0%, 91% { opacity: 0; transform: translate3d(0, 0, 0) rotate(33deg) scaleX(0.25) scale(var(--space-shoot-scale)); }
  92.5% { opacity: 0.74; }
  96% { opacity: 0.74; }
  100% { opacity: 0; transform: translate3d(390px, 380px, 0) rotate(33deg) scaleX(1.1) scale(var(--space-shoot-scale)); }
}

@keyframes space-meteor-event {
  0%, 95.8% { opacity: 0; transform: translate3d(0, 0, 0) rotate(40deg) scale(0.72); }
  96.2% { opacity: 1; }
  97.4% { opacity: 1; }
  100% { opacity: 0; transform: translate3d(-720px, 600px, 0) rotate(40deg) scale(1.24); }
}

@keyframes space-nebula-float {
  0%, 100% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(10px, -6px, 0) scale(1.03); }
}

@keyframes space-planet-drift {
  0%, 100% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(6px, -5px, 0) scale(1.015); }
}

@keyframes space-pulse-star {
  0%, 100% { opacity: 0.2; transform: scale(0.65); }
  50% { opacity: 0.74; transform: scale(1.2); }
}

@keyframes space-asteroid-drift {
  from { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0.18; }
  18% { opacity: 0.35; }
  86% { opacity: 0.34; }
  to { transform: translate3d(120vw, -22vh, 0) rotate(440deg); opacity: 0.1; }
}

@keyframes space-rocket-flyby {
  0%, 90% { transform: translate3d(0, 0, 0) rotate(9deg); opacity: 0; }
  92% { opacity: 0.62; }
  98% { opacity: 0.58; }
  100% { transform: translate3d(118vw, -36px, 0) rotate(10deg); opacity: 0; }
}

@keyframes space-rocket-flame {
  0%, 100% { transform: scaleX(0.75); opacity: 0.64; }
  50% { transform: scaleX(1.08); opacity: 0.8; }
}

@keyframes space-rocket-launch {
  0%, 97.8% {
    opacity: 0;
    transform: translate3d(0, 0, 0) rotate(0deg);
  }
  98.2% {
    opacity: 0.7;
  }
  99.3% {
    opacity: 0.66;
  }
  100% {
    opacity: 0;
    transform: translate3d(0, -128vh, 0) rotate(2deg);
  }
}

@keyframes space-rocket-subtle-spin {
  0%, 100% { transform: rotate(-1.8deg); }
  50% { transform: rotate(1.8deg); }
}

.nova-bg-space-active .nova-orb-core-shell .space-orb-rings {
  opacity: 1;
}

.space-orb-rings {
  position: absolute;
  inset: -8px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 180ms ease;
}

.space-orb-ring {
  display: none;
}

.space-orb-stars {
  position: absolute;
  inset: -14px;
}

.space-orb-star {
  --space-orb-angle: 0deg;
  --space-orb-radius: 38px;
  position: absolute;
  left: 50%;
  top: 50%;
  width: 3px;
  height: 3px;
  border-radius: 9999px;
  background: rgba(var(--accent-rgb), 0.95);
  box-shadow: 0 0 8px rgba(var(--accent-rgb), 0.72);
  transform: translate(-50%, -50%) rotate(var(--space-orb-angle)) translateX(var(--space-orb-radius));
  animation: space-orb-star-orbit linear infinite;
}

@keyframes space-orb-star-orbit {
  from { transform: translate(-50%, -50%) rotate(var(--space-orb-angle)) translateX(var(--space-orb-radius)); }
  to { transform: translate(-50%, -50%) rotate(calc(var(--space-orb-angle) + 360deg)) translateX(var(--space-orb-radius)); }
}
